<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Update Product - Furniture Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .form-input, .form-select, .form-textarea {
      border-color: #e2e8f0;
    }
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
      border-color: #3b82f6;
    }
    .ar-preview-btn {
      background-image: linear-gradient(135deg, #43e97b 0%, #3bb2b8 100%);
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800">

  <!-- Navbar -->
  <nav class="bg-white shadow-md sticky top-0 z-20">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <a href="index.html">
        <h1 class="text-2xl md:text-3xl font-bold text-indigo-700 tracking-wide">Furniture AR</h1>
      </a>
      <div class="space-x-6 text-base md:text-lg">
        <a href="index.html" class="text-gray-600 hover:text-indigo-700 transition duration-300">Home</a>
        <a href="add.html" class="text-gray-600 hover:text-indigo-700 transition duration-300 ">Add Product</a>
        <a href="update.html" class="text-indigo-700 font-semibold border-b-2 border-indigo-700 pb-1">Update Product</a>
        <a href="cart.html" class="text-gray-600 hover:text-indigo-700 transition duration-300">ðŸ›’ Cart</a>
      </div>
    </div>
  </nav>

  <!-- Manage Products -->
  <section class="max-w-6xl mx-auto py-16 px-6">
    <div class="bg-white p-8 shadow-xl rounded-2xl border border-gray-200">
      <h2 class="text-2xl font-bold mb-6 text-gray-700">Manage Products</h2>
      <div id="productList" class="space-y-4 mb-12"></div>

      <!-- Empty state -->
      <div id="emptyState" class="hidden text-center py-20">
        <img src="https://cdn-icons-png.flaticon.com/512/4076/4076507.png" alt="No products"
          class="w-28 mx-auto mb-6 opacity-70">
        <h3 class="text-xl font-semibold text-gray-600 mb-2">No Products Available</h3>
        <p class="text-gray-500 mb-6">You havenâ€™t added any products yet. Start by adding a new one.</p>
        <a href="add.html" class="px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700">Add
          Product</a>
      </div>

      <!-- Update Form -->
      <form id="updateForm" class="space-y-8 hidden">

        <div class="grid md:grid-cols-2 gap-8">
          <div class="flex flex-col">
            <div class="w-full h-80 bg-gray-200 rounded-xl flex items-center justify-center overflow-hidden">
              <img id="previewImage" src="https://via.placeholder.com/400x300.png?text=Product+Image+Preview"
                alt="Product Preview" class="object-cover w-full h-full">
            </div>

            <div>
              <label class="block text-gray-600 font-semibold mb-2">Image URL</label>
              <input type="text" id="image" class="form-input w-full border rounded-lg p-3">
            </div>
          </div>

          <div class="space-y-6">
            <div>
              <label class="block text-gray-600 font-semibold mb-2">Product Name</label>
              <input type="text" id="productName" class="form-input w-full border rounded-lg p-3">
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-gray-600 font-semibold mb-2">Price ($)</label>
                <input type="number" id="price" class="form-input w-full border rounded-lg p-3">
              </div>
              <div>
                <label class="block text-gray-600 font-semibold mb-2">Stock</label>
                <input type="number" id="stock" class="form-input w-full border rounded-lg p-3">
              </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-gray-600 font-semibold mb-2">Dimensions (LxWxH)</label>
                <input type="text" id="dimensions" class="form-input w-full border rounded-lg p-3">
              </div>
              <div>
                <label class="block text-gray-600 font-semibold mb-2">Material</label>
                <input type="text" id="material" class="form-input w-full border rounded-lg p-3">
              </div>
            </div>

            <div>
              <label class="block text-gray-600 font-semibold mb-2">Category</label>
              <select id="category" class="form-select w-full border rounded-lg p-3 bg-gray-50">
                <option disabled selected>Select category</option>
                <option>Sofa</option>
                <option>Chair</option>
                <option>Table</option>
                <option>Bed</option>
                <option>Cabinet</option>
                <option>Other</option>
              </select>
            </div>
            
          </div>
        </div>

        <div class="w-full">
          <label class="block text-gray-600 font-semibold mb-2">Description</label>
          <textarea id="description" class="form-textarea w-full border rounded-lg p-3 resize-none"
            rows="4"></textarea>
        </div>

        <button type="submit" class="ar-preview-btn w-full text-white font-bold py-4 rounded-full text-xl shadow-lg">
          Update Product
        </button>
      </form>
    </div>
  </section>

  <script>
    const productList = document.getElementById("productList");
    const updateForm = document.getElementById("updateForm");
    const previewImage = document.getElementById("previewImage");
    const emptyState = document.getElementById("emptyState");

    const productName = document.getElementById("productName");
    const price = document.getElementById("price");
    const stock = document.getElementById("stock");
    const dimensions = document.getElementById("dimensions");
    const material = document.getElementById("material");
    const category = document.getElementById("category");
    const description = document.getElementById("description");
    const image = document.getElementById("image");

    let furnitureData = JSON.parse(localStorage.getItem("furnitureData")) || [];
    let editIndex = null;

    function loadProducts() {
      productList.innerHTML = "";

      if (furnitureData.length === 0) {
        emptyState.classList.remove("hidden");
        return;
      } else {
        emptyState.classList.add("hidden");
      }

      furnitureData.forEach((product, index) => {
        const div = document.createElement("div");
        div.className = "flex justify-between items-center p-4 border rounded-lg shadow-sm bg-gray-50";

        div.innerHTML = `
          <div>
            <p class="font-semibold text-lg">${product.productName}</p>
            <p class="text-sm text-gray-600">Price: $${product.price} | Stock: ${product.stock}</p>
          </div>
          <div class="space-x-3">
            <button onclick="editProduct(${index})" class="px-4 py-2 bg-blue-500 text-white rounded-lg">Edit</button>
            <button onclick="deleteProduct(${index})" class="px-4 py-2 bg-red-500 text-white rounded-lg">Delete</button>
          </div>
        `;

        productList.appendChild(div);
      });
    }

    function editProduct(index) {
      editIndex = index;
      const product = furnitureData[index];

      productName.value = product.productName;
      price.value = product.price;
      stock.value = product.stock;
      dimensions.value = product.dimensions;
      material.value = product.material;
      category.value = product.category;
      description.value = product.description;
      image.value = product.image;
      previewImage.src = product.image;

      updateForm.classList.remove("hidden");
      window.scrollTo({ top: updateForm.offsetTop, behavior: "smooth" });
    }

    function deleteProduct(index) {
      if (confirm("Are you sure you want to delete this product?")) {
        furnitureData.splice(index, 1);
        localStorage.setItem("furnitureData", JSON.stringify(furnitureData));
        loadProducts();
      }
    }

    updateForm.addEventListener("submit", (e) => {
      e.preventDefault();
      if (editIndex === null) return;

      furnitureData[editIndex] = {
        ...furnitureData[editIndex],
        productName: productName.value,
        price: price.value,
        stock: stock.value,
        dimensions: dimensions.value,
        material: material.value,
        category: category.value,
        description: description.value,
        image: image.value
      };

      localStorage.setItem("furnitureData", JSON.stringify(furnitureData));
      alert("Product updated successfully!");
      updateForm.classList.add("hidden");
      loadProducts();
    });

    loadProducts();
  </script>
</body>

</html>